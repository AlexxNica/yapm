// vim:syntax=javascript
{
  /*
   *  Main info
   */

  name: 'yapm',
  description: 'A package manager for node (npm fork)',

  // upstream npm@1.4.10      commit 79a102f922
  // upstream visionmedia/npm commit bbcb826fbe
  version: '1.4.0',

  author: {
    // forked from npm, author: Isaac Z. Schlueter <i@izs.me>
    name: 'Alex Kocharin',
    email: 'alex@kocharin.ru',
  },

  /*
   *  WWW Links
   */
  homepage: 'https://npmjs.org/doc/',
  repository: {
    type: 'git',
    url: 'https://github.com/rlidwka/yapm',
  },
  bugs: {
    url: 'http://github.com/rlidwka/yapm/issues',
  },

  /*
   *  File structure
   */
  directories: {
    doc: './doc',
    lib: './lib',
    bin: './bin',

    // not providing any man pages since they
    // seem to conflict with npm installation
    //man: './man',
  },
  main: './lib/npm.js',
  bin: './bin/npm-cli.js',
  scripts: {
    'test-legacy': 'node ./test/run.js',
    test         : 'tap --timeout 120 test/tap/*.js',
    tap          : 'tap --timeout 120 test/tap/*.js',
    'test-all'   : 'node ./test/run.js && tap test/tap/*.js',
    prepublish   : 'node bin/npm-cli.js prune --prefix=. --no-global && rm -rf test/*/*/node_modules && make -j32 doc',
    dumpconf     : 'env | grep npm | sort | uniq',
  },

  /*
   *  Dependencies list
   */
  dependencies: {
    // npm/npm deps (unchanged)
    'abbrev': '~1.0.4',
    'ansi': '~0.2.1',
    'ansicolors': '~0.3.2',
    'ansistyles': '~0.1.3',
    'archy': '0',
    'block-stream': '0.0.7',
    'char-spinner': '~1.0.0',
    'child-process-close': '~0.1.1',
    'chmodr': '~0.1.0',
    'chownr': '0',
    'cmd-shim': '~1.1.1',
    'columnify': '0.1.2',
    'editor': '0.0.5',
    'fstream': '~0.1.25',
    'fstream-npm': '~0.1.6',
    'github-url-from-git': '1.1.1',
    'github-url-from-username-repo': '~0.1.0',
    'glob': '~3.2.9',
    'graceful-fs': '~2.0.2',
    'inflight': '~1.0.1',
    'lockfile': '~0.4.0',
    'lru-cache': '~2.5.0',
    'minimatch': '~0.2.14',
    'mkdirp': '~0.3.5',
    'node-gyp': '~0.13.0',
    'nopt': '~2.2.1',
    'npm-install-checks': '~1.0.0',
    'npm-user-validate': '~0.1.0',
    'once': '~1.3.0',
    'opener': '~1.3.0',
    'osenv': '0',
    'path-is-inside': '~1.0.0',
    'read': '~1.0.4',
    'request': '~2.30.0',
    'retry': '~0.6.0',
    'rimraf': '~2.2.5',
    'semver': '~2.3.0',
    'sha': '~1.2.1',
    'slide': '~1.1.5',
    'sorted-object': '~1.0.0',
    'tar': '~0.1.19',
    'text-table': '~0.2.0',
    'uid-number': '0.0.5',
    'which': '1',

    // visionmedia/npm deps
    'chalk': '~0.4.0',
    'gh-lookup': '~0.4.0',
    'printf': '~0.1.2',

    // our own deps
    'js-yaml': '*', // optional?
    'through': '*', // can be dropped in node 0.10+
    'jju': '~1.0.4',
    'yaml-update': '*',
  },
  bundleDependencies: [
    'abbrev',
    'ansi',
    'ansicolors',
    'ansistyles',
    'archy',
    'block-stream',
    'chalk',
    'char-spinner',
    'child-process-close',
    'chmodr',
    'chownr',
    'cmd-shim',
    'columnify',
    'editor',
    'fstream',
    'fstream-npm',
    'gh-lookup',
    'github-url-from-git',
    'github-url-from-username-repo',
    'glob',
    'graceful-fs',
    'inherits',
    'jju',
    'js-yaml',
    'lockfile',
    'lru-cache',
    'minimatch',
    'mkdirp',
    'node-gyp',
    'nopt',
    'normalize-package-data',
    'npm-install-checks',
    'npm-user-validate',
    'once',
    'opener',
    'osenv',
    'path-is-inside',
    'printf',
    'read',
    'request',
    'retry',
    'rimraf',
    'semver',
    'sha',
    'slide',
    'sorted-object',
    'tar',
    'text-table',
    'through',
    'uid-number',
    'which',
    'yaml-update',

    // this module doesn't exist anywhere except for node_modules
    'yapm-progress',

    /*
     * These dependencies are modified and different from what npm bundles
     * so they shouldn't be updated from npm, instead changes should be
     * pulled from npm/npm repo
     *
     * maybe they'll be forked to separate repositories in the future
     */

    // added [whatever."foo.bar".baz] -> whatever["foo.bar"]["baz"] syntax
    'ini',

    // TODO: sync?
    'init-package-json',

    // yapm-progress hooks
    'npm-registry-client',

    // https://github.com/npm/read-installed/pull/18
    'read-installed',

    // a LOT of changes, module isn't well decoupled from npm
    'npmconf',

    // module was rewritten completely, thanks to @visionmedia
    'npmlog',

    // changes related to preserving source code formatting
    'read-package-json',
  ],
  devDependencies: {
    ronn: '~0.3.6',
    tap: '~0.4.9',
    marked: '~0.3.2',
    'npm-registry-mock': '~0.6.3',
  },

  /*
   *  Other stuff
   */
  publishConfig: {
    'proprietary-attribs': false,
  },
  keywords: [
    'package manager',
    'modules',
    'install',
    'package.yaml',
    'package.json5',
    'yaml',
    'json5',
    'npm',
  ],
  preferGlobal: true,
  config: {
    publishtest: false,
  },
  engines: {
    node: '>=0.8',
    npm: '1',
  },
  license: 'Artistic-2.0',
}
